(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{244:function(t,r,e){var content=e(311);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(19).default)("7388ab72",content,!0,{sourceMap:!1})},268:function(t,r,e){"use strict";e(9),e(5),e(6),e(11),e(10),e(12);var n=e(15),o=e(2),c=(e(53),e(75));function l(object,t){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),r.push.apply(r,e)}return r}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(r){Object(o.a)(t,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(source,r))}))}return t}var d={data:function(){return{title:"TOYOTA L&F",user:null}},created:function(){var t=this;this.bindMovies(),this.bindRooms(),this.bindTasks(),this.$fire.auth.onAuthStateChanged((function(r){r?(t.user=r,"sample"===t.user.photoURL&&(t.user.photoURL=null)):t.user=null}))},methods:f(f({},Object(c.b)({bindMovies:"movies/bind",bindRooms:"rooms/bind",bindTasks:"tasks/bind"})),{},{logout:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$fire.auth.signOut();case 2:t.user=null;case 3:case"end":return r.stop()}}),r)})))()}})},v=e(62),m=e(68),h=e.n(m),y=e(417),w=e(418),O=e(183),_=e(405),j=e(403),k=e(422),x=e(407),$=e(419),I=e(270),E=e(200),V=e(420),U=e(409),C=e(421),R=e(265),component=Object(v.a)(d,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-app",{attrs:{dark:""}},[e("v-app-bar",{attrs:{fixed:"",app:""}},[e("v-spacer"),t._v(" "),e("v-toolbar-title",{staticStyle:{"padding-right":"10px"},domProps:{textContent:t._s(t.title)}}),t._v(" "),e("nuxt-link",{attrs:{to:"/"}},[e("img",{staticStyle:{width:"50px"},attrs:{src:"/logo/favicon_toyota.png"}})]),t._v(" "),e("v-spacer"),t._v(" "),t.user?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on;return[e("v-btn",t._g({},n),[e("v-avatar",{attrs:{size:"36",color:"primary"}},[t.user.photoURL?e("v-img",{attrs:{src:t.user.photoURL}}):e("span",{staticClass:"white--text text-h5"},[t._v(t._s(t.user.displayName.slice(0,2)))])],1),t._v(" "),e("strong",{staticClass:"mx-3"},[t._v(t._s(t.user.displayName))])],1)]}}])},[t._v(" "),e("v-card",[e("v-list-item-content",{staticClass:"justify-center"},[e("div",{staticClass:"mx-auto text-center px-3"},[e("v-avatar",{attrs:{color:"primary"}},[t.user.photoURL?e("v-img",{attrs:{src:t.user.photoURL}}):e("span",{staticClass:"white--text text-h5"},[t._v(t._s(t.user.displayName.slice(0,2)))])],1),t._v(" "),e("h3",[t._v(t._s(t.user.displayName))]),t._v(" "),e("p",{staticClass:"text-caption mt-1"},[t._v("\n              "+t._s(t.user.email)+"\n            ")]),t._v(" "),e("v-divider",{staticClass:"my-3"}),t._v(" "),e("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:t.logout}},[t._v(" Logout ")])],1)])],1)],1):e("v-btn",{attrs:{color:"primary",nuxt:"",to:"/auth/login"}},[t._v("\n      Sing In / Sign Up\n    ")])],1),t._v(" "),e("v-main",[e("v-container",[e("Nuxt")],1)],1),t._v(" "),e("v-footer",{attrs:{app:""}},[e("span",[t._v("Â© "+t._s((new Date).getFullYear()))])])],1)}),[],!1,null,null,null);r.a=component.exports;h()(component,{VApp:y.a,VAppBar:w.a,VAvatar:O.a,VBtn:_.a,VCard:j.a,VContainer:k.a,VDivider:x.a,VFooter:$.a,VImg:I.a,VListItemContent:E.a,VMain:V.a,VMenu:U.a,VSpacer:C.a,VToolbarTitle:R.a})},269:function(t,r,e){"use strict";e(9),e(5),e(6),e(11),e(10),e(12);var n=e(2),o=e(75);function c(object,t){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),r.push.apply(r,e)}return r}var l={data:function(){return{title:"toyota l&f"}},created:function(){this.bindMovies(),this.bindRooms()},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(r){Object(n.a)(t,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(source,r))}))}return t}({},Object(o.b)({bindMovies:"movies/bind",bindRooms:"rooms/bind"}))},f=l,d=e(62),v=e(68),m=e.n(v),h=e(417),y=e(418),w=e(422),O=e(420),component=Object(d.a)(f,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-app",{attrs:{dark:""}},[e("v-app-bar",{attrs:{app:""}}),t._v(" "),e("v-main",[e("v-container",[e("Nuxt")],1)],1),t._v(" "),e("UnderNav")],1)}),[],!1,null,null,null);r.a=component.exports;m()(component,{UnderNav:e(401).default}),m()(component,{VApp:h.a,VAppBar:y.a,VContainer:w.a,VMain:O.a})},279:function(t,r,e){e(280),t.exports=e(281)},303:function(t,r,e){"use strict";e.r(r),r.default=function(t){var r=t.app,e=t.redirect;if(!r.$fire.auth.currentUser)return e("/auth/login")}},310:function(t,r,e){"use strict";e(244)},311:function(t,r,e){var n=e(18)(!1);n.push([t.i,"h1[data-v-bfedb7fe]{font-size:20px}",""]),t.exports=n},379:function(t,r,e){"use strict";e.r(r),e.d(r,"mutations",(function(){return n}));var n=e(36).b},380:function(t,r,e){"use strict";e.r(r),e.d(r,"state",(function(){return o})),e.d(r,"getters",(function(){return c})),e.d(r,"actions",(function(){return l}));e(6);var n=e(36),o=function(){return{items:[]}},c={all:function(t){return t.items},byId:function(t){return function(r){var e=t.items.filter((function(t){return t.id===r}));return e.length>0?e[0]:null}},byCategory:function(t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r?t.items.filter((function(t){return t.category===r})):t.items}}},l={bind:Object(n.a)((function(t){return(0,t.bindFirestoreRef)("items",this.$fire.firestore.collection("movies").orderBy("start"))}))}},381:function(t,r,e){"use strict";e.r(r),e.d(r,"state",(function(){return l})),e.d(r,"getters",(function(){return f})),e.d(r,"actions",(function(){return d}));e(6),e(37),e(13),e(29),e(42),e(24),e(5),e(44),e(58),e(26);var n=e(36);function o(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(!t)return;if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,f=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return l=t.done,t},e:function(t){f=!0,o=t},f:function(){try{l||null==e.return||e.return()}finally{if(f)throw o}}}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,e=new Array(r);i<r;i++)e[i]=t[i];return e}var l=function(){return{items:[]}},f={all:function(t){return t.items},byId:function(t){return function(r){var e=t.items.filter((function(t){return t.id===r}));return e.length>0?e[0]:null}},byNumber:function(t){return function(r){var e=t.items.filter((function(t){return t.number===r}));return e.length>0?e[0]:null}},byMovie:function(t){return function(r){return t.items.filter((function(t){return t.movie_uid===r}))}},countAudience:function(t){return function(r){var e,n=t.items.filter((function(t){return t.movie_uid===r})),c=0,l=o(n);try{for(l.s();!(e=l.n()).done;){c+=e.value.users.length}}catch(t){l.e(t)}finally{l.f()}return c}}},d={bind:Object(n.a)((function(t){return(0,t.bindFirestoreRef)("items",this.$fire.firestore.collection("rooms"))})),add:Object(n.a)((function(t,r){var title=r.title,e=r.users,n=r.detail,o=r.adminId,c=r.skyway,l=r.movieId,f=r.id;return this.$fire.firestore.collection("rooms").add({title:title,users:e,detail:n,admin_uid:o,skyway:c,movie_uid:l,id:f})})),remove:Object(n.a)((function(t,r){var e=t.getters,n=r.roomId,o=this.$fire.auth().currentUser;if(null===o)throw new Error("is not logged in");var c=e.byId(n);if(!c)throw new Error("invalid room id");if(c.admin_uid!==o.uid)throw new Error("permission denied");return this.$fire.firestore.collection("rooms").doc(n).delete()})),join:Object(n.a)((function(t,r){var e=t.getters,n=r.roomId,o=this.$fire.auth.currentUser;if(null===o)throw new Error("is not logged in");if(!e.byId(n))throw new Error("invalid room id");return this.$fire.firestore.collection("rooms").doc(n).update({users:this.$fireModule.firestore.FieldValue.arrayUnion(o.uid)})})),leave:Object(n.a)((function(t,r){var e=t.getters,n=r.roomId,o=this.$fire.auth.currentUser;if(null===o)throw new Error("is not logged in");if(!e.byId(n))throw new Error("invalid room id");return this.$fire.firestore.collection("rooms").doc(n).update({users:this.$fireModule.firestore.FieldValue.arrayRemove(o.uid)})}))}},382:function(t,r,e){"use strict";e.r(r),e.d(r,"state",(function(){return o})),e.d(r,"getters",(function(){return c})),e.d(r,"actions",(function(){return l}));e(6);var n=e(36),o=function(){return{items:[]}},c={all:function(t){return t.items},byId:function(t){return function(r){var e=t.items.filter((function(t){return t.id===r}));return e.length>0?e[0]:null}},byNumber:function(t){return function(r){var e=t.items.filter((function(t){return t.number===r}));return e.length>0?e[0]:null}}},l={bind:Object(n.a)((function(t){return(0,t.bindFirestoreRef)("items",this.$fire.firestore.collection("tasks"))})),add:Object(n.a)((function(t,r){var title=r.title,e=r.users,n=r.detail,o=r.adminId,c=r.skyway,l=r.movieId,f=r.id;return this.$fire.firestore.collection("tasks").add({title:title,users:e,detail:n,admin_uid:o,skyway:c,movie_uid:l,id:f})})),remove:Object(n.a)((function(t,r){var e=t.getters,n=r.taskId,o=this.$fire.auth().currentUser;if(null===o)throw new Error("is not logged in");var c=e.byId(n);if(!c)throw new Error("invalid task id");if(c.admin_uid!==o.uid)throw new Error("permission denied");return this.$fire.firestore.collection("tasks").doc(n).delete()})),update:Object(n.a)((function(t,r){var e=t.getters,n=r.taskId;e.byId(n);return this.$fire.firestore.collection("tasks").doc(n).update({prod_code:e})})),join:Object(n.a)((function(t,r){var e=t.getters,n=r.taskId,o=this.$fire.auth.currentUser;if(null===o)throw new Error("is not logged in");if(!e.byId(n))throw new Error("invalid task id");return this.$fire.firestore.collection("tasks").doc(n).update({users:this.$fireModule.firestore.FieldValue.arrayUnion(o.uid)})})),leave:Object(n.a)((function(t,r){var e=t.getters,n=r.taskId,o=this.$fire.auth.currentUser;if(null===o)throw new Error("is not logged in");if(!e.byId(n))throw new Error("invalid task id");return this.$fire.firestore.collection("tasks").doc(n).update({users:this.$fireModule.firestore.FieldValue.arrayRemove(o.uid)})}))}},401:function(t,r,e){"use strict";e.r(r);var n={data:function(){return{value:1,drawer:!0}},computed:{movieUid:function(){return this.$route.params.movieId}}},o=e(62),c=e(68),l=e.n(c),f=e(423),d=e(405),component=Object(o.a)(n,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"overflow-hidden"},[e("div",{staticClass:"text-center mb-8"},[e("v-btn",{attrs:{color:"dark"},on:{click:function(r){t.drawer=!t.drawer}}},[t._v("\n      Toggle Navigation\n    ")])],1),t._v(" "),e("v-bottom-navigation",{attrs:{"input-value":t.drawer,color:"primary",height:"600"}},[e("RoomList",{attrs:{"movie-uid":t.movieUid}})],1)],1)}),[],!1,null,null,null);r.default=component.exports;l()(component,{VBottomNavigation:f.a,VBtn:d.a})},87:function(t,r,e){"use strict";var n={layout:"empty",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(e(310),e(62)),c=e(68),l=e.n(c),f=e(417),component=Object(o.a)(n,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-app",{attrs:{dark:""}},[404===t.error.statusCode?e("h1",[t._v("\n    "+t._s(t.pageNotFound)+"\n  ")]):e("h1",[t._v("\n    "+t._s(t.otherError)+"\n  ")]),t._v(" "),e("NuxtLink",{attrs:{to:"/"}},[t._v("\n    Home page\n  ")])],1)}),[],!1,null,"bfedb7fe",null);r.a=component.exports;l()(component,{VApp:f.a})}},[[279,26,7,27]]]);